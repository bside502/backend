<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.bside.redaeri.persona.PersonaMapper">
	<select id="getPersonaInfo" parameterType="int" resultType="HashMap">
		SELECT
			p.idx 				as personaIdx
			, persona_select 	as personaSelect
			, emotion_select 	as emotionSelect
			, length_select 	as lengthSelect
			, all_answer 		as allAnswer
		FROM
			persona p 
		JOIN
			store s 
		ON	p.store_idx = s.idx 
		WHERE
			s.user_idx = #{loginIdx}
	</select>
	
	<!-- 말투 직접 선택해서 저장 -->
	<insert id="insertPersonaInfo" parameterType="HashMap">
		INSERT INTO persona (
			persona_select
			, emotion_select
			, length_select
			, all_answer
		) VALUE (
			#{personaSelect}
			, #{emotionSelect}
			, #{lengthSelect}
			, #{allAnswer}
		)
	</insert>
	
	<!-- 말투 직접 수정해서 저장 -->
	<update id="updatePersonaInfo" parameterType="HashMap">
		UPDATE persona
		SET
			persona_select = #{personaSelect}
			, emotion_select = #{personaSelect}
			, length_select = #{lengthSelect}
			, all_answer = #{allAnswer}
		WHERE
			idx = #{personaIdx}
	</update>
</mapper>